<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="NL2Post">
    <meta name="keywords" content="Nl2Postcondition">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Can LLMs Transform NL Intent into Formal Postconditions?</title>

    <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

    <link rel="stylesheet" href="./static/css/bulma.min.css">
    <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
    <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
    <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="stylesheet" href="./static/css/index.css">
    <link rel="icon" href="./static/images/favicon.svg">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="./static/js/fontawesome.all.min.js"></script>
    <script src="./static/js/bulma-carousel.min.js"></script>
    <script src="./static/js/bulma-slider.min.js"></script>
    <script src="./static/js/index.js"></script>
</head>

<body>
    <div class="banner">
        üéâ This work has been accepted to FSE 2024!
    </div>

    <section class="hero">
        <div class="hero-body">
            <div class="container is-max-desktop">
                <div class="columns is-centered">
                    <div class="column has-text-centered">
                        <h1 class="title is-1 publication-title">Can Large Language Models Transform Natural Language
                            Intent into Formal Method Postconditions?</h1>
                        <div class="is-size-5 publication-authors">
                            <span class="author-block">
                                <a href="http://madelineendres.com">Madeline Endres</a><sup>1</sup>,</span>
                            <span class="author-block">
                                <a href="https://smfakhoury.github.io">Sarah Fakhoury</a><sup>2</sup>,</span>
                            <span class="author-block">
                                <a href="https://saikatc.info">Saikat Chakraborty</a><sup>2</sup>,
                            </span>
                            <span class="author-block">
                                <a
                                    href="https://www.microsoft.com/en-us/research/people/shuvendu/?from=https://research.microsoft.com/~shuvendu&type=exact">Shuvendu
                                    K. Lahiri</a><sup>2</sup>
                            </span>
                        </div>

                        <div class="is-size-5 publication-authors">
                            <span class="author-block"><sup>1</sup>University of Michgain,</span>
                            <span class="author-block"><sup>2</sup>Microsoft Research</span>
                        </div>

                        <div class="column has-text-centered">
                            <div class="publication-links">
                                <!-- PDF Link. -->
                                <span class="link-block">
                                    <a href="https://arxiv.org/pdf/2310.01831"
                                        class="external-link button is-normal is-rounded is-dark">
                                        <span class="icon">
                                            <i class="fas fa-file-pdf"></i>
                                        </span>
                                        <span>Paper</span>
                                    </a>
                                </span>
                                <span class="link-block">
                                    <a href="https://arxiv.org/abs/2310.01831"
                                        class="external-link button is-normal is-rounded is-dark">
                                        <span class="icon">
                                            <i class="ai ai-arxiv"></i>
                                        </span>
                                        <span>arXiv</span>
                                    </a>
                                </span>
                                <!-- Code Link. -->
                                <span class="link-block">
                                    <a href="" class="external-link button is-normal is-rounded is-dark">
                                        <span class="icon">
                                            <i class="fab fa-github"></i>
                                        </span>
                                        <span>Code (Coming Soon!)</span>
                                    </a>
                                </span>
                                <!-- Dataset Link. -->
                                <span class="link-block">
                                    <a href=" " class="external-link button is-normal is-rounded is-dark">
                                        <span class="icon">
                                            <i class="far fa-images"></i>
                                        </span>
                                        <span>Data (Coming Soon!)</span>
                                    </a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


 



    <section class="section">
        <div class="container is-max-desktop">
            <!-- Abstract. -->
            <div class="columns is-centered has-text-centered">
                <div class="column is-four-fifths">
                    <h2 class="title is-3">Abstract</h2>
                    <div class="content has-text-justified">
                        <p>
                            Informal natural language that describes code functionality, such as code comments or function documentation,
                            may contain substantial information about a program‚Äôs intent. However, there is typically no guarantee that a
                            program‚Äôs implementation and natural language documentation are aligned. In the case of a conflict, leveraging
                            information in code-adjacent natural language has the potential to enhance fault localization, debugging,
                            and code trustworthiness. In practice, however, this information is often underutilized due to the inherent
                            ambiguity of natural language which makes natural language intent challenging to check programmatically.
                            The ‚Äúemergent abilities‚Äù of Large Language Models (LLMs) have the potential to facilitate the translation of
                            natural language intent to programmatically checkable assertions. However, it is unclear if LLMs can correctly
                            translate informal natural language specifications into formal specifications that match programmer intent.
                            Additionally, it is unclear if such translation could be useful in practice.
                        </p>
                        <p>
                            In this paper, we describe nl2postcond, the problem of leveraging LLMs for transforming informal natural
                            language to formal method postconditions, expressed as program assertions. We introduce and validate metrics
                            to measure and compare different nl2postcond approaches, using the correctness and discriminative power of
                            generated postconditions. We then use qualitative and quantitative methods to assess the quality of nl2postcond
                            postconditions, finding that they are generally correct and able to discriminate incorrect code. Finally, we find
                            that nl2postcond via LLMs has the potential to be helpful in practice; nl2postcond generated postconditions
                            were able to catch 64 real-world historical bugs from Defects4J
                        </p>
                       
                    </div>
                </div>
            </div>
            <!--/ Abstract. -->

      
    </section>

    <section class="section">
        <div class="container is-max-desktop">
          <div class="columns is-centered has-text-centered">
            <div class="column is-four-fifths">
              <h2 class="title is-3">Postconditions Help Formalize Ambiguous User Intent </h2>
              <div class="content has-text-justified">

                <img src="./static/images/post.png" alt="postcondition" class="teaser-image center" width="100%" />
                <p class="subtitle has-text-justified">
                    Example of how postconditions could be used to clarify ambiguous natural language specifications
                </p>  
                <p>
                    Natural language specifications, often writen by users when interacting with an LLM via a prompt, are often ambiguous.  Consider the exampe above, taken from the popular Python code generation benchmark, HumanEval. A programmer intends a function that removes all numbers with duplicates from a list. For example, given the list [1,2,3,2,4] the function should return [1,3,4] without the element 2 because it appears more than once. The programmer describes the function specification in a docstring. However, this natural language specification is ambiguous; it does not indicate if all copies of the duplicated elements should be removed, or if one copy should be retained. In this case, the programmer intends the former, however, it is not uncommon to expect that the program should fulfill the latter.
                    Figure (c) contains two postconditions, each satisfying one of the two possible intents of the ambiguous docstring. The programmer writing the remove_duplicates function can verify that the second postcondition "assert all(numbers.count(i)==1 for i in return_list)‚Äù correctly matches their intent, by ensuring that all numbers in the returned list occur exactly once in the input list. The first postcondition, however, incorrectly asserts that return_list is a set of the input list numbers. In this example from HumanEval, it is not immediately clear at first glance what the user intent is. Generating such postconditions from natural language allows for checkable and unambiguous statements about a program‚Äôs intended behavior, formalizing a user‚Äôs intent about a program.
    
                </p>

            </div>
            </div>
          </div>
        </div>
      </section>


    <section class="section">
        <div class="container is-max-desktop">
          <div class="columns is-centered has-text-centered">
            <div class="column is-four-fifths">
              <h2 class="title is-3">Postconditions Can Catch Bugs in Real-World Programs</h2>
              <div class="content has-text-justified">
                <img src="./static/images/bug.png" alt="postcondition" class="teaser-image center" width="100%" />
                <p class="subtitle has-text-justified">
                    Example of how postconditions or other formal specifications of program behavior could catch bugs. This example is a historical bug from Defects4J (Math-9): the Line constructor does not return a new line with enough precision. The postconditions were generated by GPT-4 in our evaluation, and both catch the bug.
                </p>  
                <p>
                    In practice, postconditions generated in the target programming language can be used in assertions, as demonstrated in fig. 1c, to check the correctness of a function, enabling the early detection of bugs or violations of a programmer‚Äôs intent.
The example in the figure above shows how formal specifications can be used to catch bugs in real-world programs. A bug from the Apache Commons Math project, the function revert() calls a constructor Line() that should return a new Line object with a reversed direction. The bug report 1 associated with the issue explains that revert() does not maintain enough precision, and fails in certain scenarios. Both of the provided postconditions in Figure c catch the bug by leveraging project-specific context and general mathematical knowledge about the specifications of a reversed line.
                </p>

               
            </div>
            </div>
          </div>
        </div>
      </section>


  
      <section class="section" id="BibTeX">
        <div class="container is-max-desktop content">
          <h2 class="title">BibTeX</h2>
          <pre style="background-color:black; border-radius: 10px;"><code style="color:white;">@inproceedings{
        endres2024NLPost,
        title={Can Large Language Models Transform Natural Language Intent into Formal Method Postconditions?},
        author={Madeline Endres and Sarah Fakhoury and Saikat Chakraborty and Shuvendu K. Lahiri},
        booktitle={In Proceedings of the ACM on Software Engineering (FSE)},
        volume={1}
        year={2024}
    }</code></pre>
        </div>
      </section>



    <footer class="footer">
        <div class="container">
            <div class="content has-text-centered">
                <a class="icon-link" href="https://arxiv.org/pdf/2310.01831">
                    <i class="fas fa-file-pdf"></i>
                </a>
                <a class="icon-link" href="" class="external-link" disabled>
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="columns is-centered">
                <div class="column is-8">
                    <div class="content">
                        <p>
                             <a
                                href="https://github.com/nerfies/nerfies.github.io">Site Template</a> 
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

</body>

</html>
